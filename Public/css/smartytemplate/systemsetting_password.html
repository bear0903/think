
</head>
<body class="page-container">
<!--{if $smarty.get.token }-->
<div style="width:60%;margin-left:auto; margin-right:auto; margin-top:10%;">
<!--{/if}-->
<!--{include file="block_box_header.html" title=$BLOCK_TITLE|default:"Change Password" showLine=1}-->
<form name="form1" METHOD="post" ACTION="#">
<table class="bordertable">
	<tr>
		<td class="column-label"><!--{$OLD_PASSWORD}-->*</td>
		<td><INPUT id="old_password" class="input-text" TYPE="password"
			NAME="old_password" value="<!--{$post.old_password}-->"></td>
	</tr>
	<tr>
		<td class="column-label"><!--{$NEW_PASSWORD}-->*</td>
		<td><INPUT id="new_password" TYPE="password" class="input-text"
			NAME="new_password" value="<!--{$post.new_password}-->"></td>
	</tr>
	<tr>
		<td class="column-label"><!--{$REPEAT_PASSWORD}-->*</td>
		<td><INPUT id="repeat_password" TYPE="password"
			class="input-text" value="<!--{$post.new_password}-->"></td>
	</tr>
	<tr>
		<td></td>
		<td><input id="doSave" TYPE="button" class="button-submit"
			NAME="action" value="<!--{$SUBMIT_BTN_LABEL}-->"> <INPUT
			id="reset" TYPE="reset" class="button-submit" NAME="reset"
			value="<!--{$RESET_BTN_LABEL}-->"></td>
	</tr>

</table>
</form>
<!--{$errCode}-->
<!--{include file="block_box_footer.html"}-->
<!--{if $smarty.get.token }-->
</div>
<!--{/if}-->
<script type="text/javascript">
	$("#doSave").click(
		function() {
			if ($("#old_password").val() == '') {
				alert("<!--{$PLEASE_INPUT|default:'请输入'}--><!--{$OLD_PASSWORD|default:'原密码'}-->");
				$("#old_password").focus();
				return false;
			}
			if ($("#new_password").val() == '') {
				alert("<!--{$PLEASE_INPUT|default:'请输入'}--><!--{$NEW_PASSWORD|default:'新密码'}-->");
				$("#new_password").focus();
				return false;
			}
			if ($("#new_password").val() == $("#old_password").val()) {
				alert("<!--{$MSG_008|default:'新密码不能和旧密码相同.'}-->");
				$("#new_password").focus();
				return false;
			}
			if ($("#new_password").val().length < 6){
				alert("<!--{$MSG_007|default:'新密码太短，最少要6位且为字母+数字+特殊字符混和型密码.'}-->");
				$("#new_password").focus();
				return false;
			}
			/*
			if ($("#new_password").val().length > 16) {
				alert("<!--{$MSG_001|default:'新密码太长，请输入长度不超过16位的字母数字混和型密码.'}-->");
				$("#new_password").focus();
				return false;
			}*/
			var r = CheckPasswordStrenth($("#new_password").val());
			if (r != true) {
				//alert("<!--{$MSG_002|default:'请输入长度不超过16位的字母数字混和型密码.'}-->");
				alert(r);
				$("#new_password").focus();
				return false;
			}

			if ($("#repeat_password").val() == '') {
				alert("<!--{$MSG_003|default:'请再次输入新密码.'}-->");
				$("#repeat_password").focus();
				return false;
			}
			if ($("#repeat_password").val() != $("#new_password")
					.val()) {
				alert("<!--{$MSG_004|default:'两次输入的新密码不一致，请重新输入.'}-->");
				$("#repeat_password").select();
				return false;
			}
			this.form.submit();
	});
	
	/*
	* CheckPassword Strenth
	* add by dennis 2012-07-25
	*/
	function CheckPasswordStrenth(password)
	{
		if (password.length < 6)
			return '密碼最少要 6 位';
		if (!password.match(/\d+/))
			return '密碼中必須要有數字(0-9)';
		if (!password.match(/[a-z]/) &&
			!password.match(/[A-Z]/))
			return '密碼中必須要有字母(a-z)';
		if (!password.match(/.[@,#,$,%,^,&,*,?,_,~,-,(,)]/))
			///.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/) // 感叹号没办法通过 by Dennis 2014/05/16
			return '密碼中必須要有特殊字符 (@,#,$,%,^,&,*,?,_,~,-,(,))';
		return true;
	}
</script>