
</head>
<body class="page-container">
<!--{include file="block_box_header.html" title=$BLOCK_TITLE|default:'表定義' showLine=1}-->

<!--{if $show=='List'}-->
<table class="bordertable">
	<thead>
	<tr>
		<th><!--{$TABLE_NAME_LABEL|default:'表名'}--> </th>
		<th><!--{$TABLE_ALLIES_NAME_LABEL|default:'別名'}--> </th>
		<th><!--{$IS_DEFINE_LABEL|default:'自定義表'}--></th>
		<th><!--{$RELATION_SQL_LABEL|default:'關聯SQL'}--></th>
		<th><!--{$OPERATE|default:'操作'}--></th>
	</tr>
	</thead>
	<tbody>
	<!--{section name="i" loop=$list}-->
	<tr>
	    <td><!--{$list[i].TABLE_NAME}--></td>
	    <td><!--{$list[i].TABLE_ALLIES_NAME}--></td>
		<td><!--{$list[i].IS_DEFINE}--></td>
		<td><!--{$list[i].RELATION_SQL}--></td>
		<td>
			<a target="_self" href="javascript:doNew('<!--{$list[i].PROGRAM_NO}-->');">
		    	<!--{$SaveSearchButton.NEW}-->
		    </a>
			<a target="_self" href="javascript:doEdit('<!--{$list[i].PROGRAM_NO}-->','<!--{$list[i].TABLE_ALLIES_NAME}-->');">
		    	<!--{$SaveSearchButton.EDIT}-->
		    </a>
			<a href="javascript:doDelete('<!--{$list[i].PROGRAM_NO}-->','<!--{$list[i].TABLE_ALLIES_NAME}-->');">
		    	<!--{$SaveSearchButton.DELETE}-->
		    </a>
		</td>
	</tr>
	 <!--{/section}-->
	 
	 </tbody>
</table>
<form id="editForm" name="editForm" METHOD="POST" ACTION="#">
<input type="hidden" name="do"  id="do">
<input type="hidden" name="PROGRAM_NO" id="PROGRAM_NO">
<input type="hidden" name="TABLE_ALLIES_NAME" id="TABLE_ALLIES_NAME">
</form>
<!--{/if}-->

<!--{if $show=='New' or $show=='Edit'}-->
<form id="postForm" name="postForm" METHOD="POST" ACTION="#">
<table >
<tbody>
	<tr >
		<td  width="30%"><!--{$TABLE_NAME_LABEL|default:'表名'}--></td>
		<td><input  id="TABLE_NAME" NAME="TABLE_NAME" class="input-text" TYPE="text" 
			value="<!--{$row.TABLE_NAME}-->" >
		</td>
	</tr>
	<tr >
		<td width="30%"><!--{$TABLE_ALLIES_NAME_LABEL|default:'別名'}--></td>
		<td><input  id="TABLE_ALLIES_NAME" NAME="TABLE_ALLIES_NAME" class="input-text" TYPE="text" 
			value="<!--{$row.TABLE_ALLIES_NAME}-->" >
		</td>
	</tr>
	</tr>

	<tr>
		<td nowrap><!--{$IS_DEFINE_LABEL|default:'自定義表'}--></td>
		<td><input id="IS_DEFINE" NAME="IS_DEFINE" class="input-text" TYPE="text" 
			value="<!--{$row.IS_DEFINE}-->" >
		</td>
	</tr>
	<tr >
		<td nowrap><!--{$RELATION_SQL_LABEL|default:'關聯SQL'}--></td>
		<td><input id="RELATION_SQL" NAME="RELATION_SQL" class="input-text" TYPE="text" 
			value="<!--{$row.RELATION_SQL}-->" >
		</td>
	</tr>
	<tr >
		<td nowrap><!--{$REMARKS_LABEL|default:'備註'}--></td>
		<td><input id="REMARKS" NAME="REMARKS" class="input-text" TYPE="text" 
			value="<!--{$row.REMARKS}-->" >
		</td>
	</tr>
	
	<tr>
		<td ></td>
		<td >
		    <INPUT TYPE="button" class="button-submit" VALUE=" <!--{$SaveSearchButton.SAVE}--> " id="doSave">
			<INPUT TYPE="button" class="button-submit" VALUE=" <!--{$SaveSearchButton.CANCEL}--> " id="doCancel">
		</td>
	</tr>
</tbody>
</table>
<input type="hidden" name="do"  id="do">
<input type="hidden" name="PROGRAM_NO" id="PROGRAM_NO" value="<!--{$row.PROGRAM_NO}-->">
<input type="hidden" name="OLD_TABLE_ALLIES_NAME" id="OLD_TABLE_ALLIES_NAME" value="<!--{$row.TABLE_ALLIES_NAME}-->">
</form>
<!--{/if}-->

<!--{include file="block_box_footer.html"}-->

<script src="../js/functions.js" language = "JavaScript" type = "text/javascript" charset = "utf-8"></script>
<script type="text/javascript">
/*
function doSave(){
	//var subject_class_id = $('#SUBJECT_CLASS_ID').val();
	var indata=$("#editForm").serialize(); 
	$.post(
		'?scriptname=train_enter_for&do=Save',
		indata,//{ SUBJECT_CLASS_ID: subject_class_id },
		function(data){
		      alert(data);
			  
		} 
	);
}
*/
function doDelete(program_no,tb_name){
	var confirm=window.confirm("<!--{$SaveSearchButton.ALERT_DELETE_CONFIRM}-->"); 
	if(confirm){
		$("#do").val('DeleteTable');
		$("#PROGRAM_NO").val(program_no);
		$("#TABLE_ALLIES_NAME").val(tb_name);
		document.editForm.submit();
	}
}
function doEdit(program_no,tb_name){
	//alert(program_no);alert(group_id);
	$("#do").val('EditTable');
	$("#PROGRAM_NO").val(program_no);
	$("#TABLE_ALLIES_NAME").val(tb_name);
	document.editForm.submit();
}

function doNew(program_no){
	//alert(program_no);alert(group_id);
	$("#do").val('NewTable');
	$("#PROGRAM_NO").val(program_no);
	//$("#GROUP_ID").val(group_id);
	document.editForm.submit();
}
$("#doSave").click(function(){
	$("#do").val('SaveTable');
	document.postForm.submit();
});
$("#doCancel").click(function(){
	$("#do").val('ListTable');
	document.postForm.submit();
});

$(document).ready(function(){
	document.title='自定義程式';
});

</script>
 


